/* Tailwind layers (preflight is disabled) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide scrollbar but keep functionality */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

/* Mapbox GL CSS */
@import "mapbox-gl/dist/mapbox-gl.css";

/* ---------- Driver map: Mapbox control tweaks ---------- */
/* Make Mapbox NavigationControl (+ / - / compass) horizontal in driver live map,
   and theme it to match the selected map theme. Scoped to #driver-live-map only. */
#driver-live-map .mapboxgl-ctrl-top-right {
  /* keep it slightly inset and away from the rounded frame edge */
  top: 0.75rem;
  right: 0.75rem;
}

/* Hard-enforce rounded corners on the whole driver map viewport */
#driver-live-map {
  border-radius: 0.75rem; /* rounded-xl */
  overflow: hidden;
}
#driver-live-map > div {
  border-radius: inherit;
  overflow: hidden;
}

#driver-live-map .mapboxgl-ctrl-group {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  overflow: hidden; /* ensure rounded corners clip */
}

#driver-live-map .mapboxgl-ctrl-group button {
  width: 44px;
  height: 44px;
}

/* Replace vertical dividers with horizontal dividers */
#driver-live-map .mapboxgl-ctrl-group button + button {
  border-top: 0 !important;
  border-left: 1px solid rgba(15, 23, 42, 0.12) !important;
}

/* Keep corners correct for row layout */
#driver-live-map .mapboxgl-ctrl-group button:first-child {
  border-top-left-radius: 10px !important;
  border-bottom-left-radius: 10px !important;
}
#driver-live-map .mapboxgl-ctrl-group button:last-child {
  border-top-right-radius: 10px !important;
  border-bottom-right-radius: 10px !important;
}

/* Keep the driver map corners rounded across style/theme changes.
   Mapbox can recreate internal DOM nodes on setStyle(); this ensures the canvas remains clipped. */
#driver-live-map .mapboxgl-map,
#driver-live-map .mapboxgl-canvas-container,
#driver-live-map canvas.mapboxgl-canvas {
  border-radius: 0.75rem !important; /* matches Tailwind rounded-xl */
}
#driver-live-map .mapboxgl-canvas-container {
  overflow: hidden !important;
}

/* Dark map theme: dark glass background + light icons */
#driver-live-map[data-map-theme="dark"] .mapboxgl-ctrl-group {
  background: rgba(2, 6, 23, 0.55) !important;
  border: 1px solid rgba(255, 255, 255, 0.14) !important;
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35) !important;
}

#driver-live-map[data-map-theme="dark"] .mapboxgl-ctrl-group button {
  background: transparent !important;
}

#driver-live-map[data-map-theme="dark"] .mapboxgl-ctrl-group button + button {
  border-left: 1px solid rgba(255, 255, 255, 0.14) !important;
}

#driver-live-map[data-map-theme="dark"] .mapboxgl-ctrl-icon {
  filter: invert(1) brightness(1.1);
}

/* Dark-mode satellite: gently reduce glare for night driving.
   Apply the filter ONCE (canvas only) to avoid double-dimming. */
#driver-live-map[data-map-theme="dark"][data-map-layer="satellite"] canvas.mapboxgl-canvas {
  filter: brightness(0.90) contrast(1.12) saturate(1.02);
}

/* ---------- Globals ---------- */
:root { color-scheme: light; }
body {
  background: #fafcfc;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Prevent horizontal page movement: keep layout responsive but disallow left-right scrolling.
   This ensures the UI adapts to viewport width without enabling unintended horizontal pan. */
html, body, #__next {
  overflow-x: hidden;
}

/* Admin UI refinements */
/* Admin layout variables: sidebar width and footer height used site-wide */
:root { --admin-sidebar-width: 14rem; --admin-footer-height: 48px; }
/* Driver-specific accent used in driver greeting and status indicators */
:root { --driver-accent: #02665e; }
/* Reserve a footer height so fixed elements (sidebar, floating actions) can sit above it without overlapping
  This enables a "sticky" footer behavior: the footer is at the end of the document but fixed UI will stop
  above it when visible. Adjust this value to match the visual footer height. */
:root { --footer-height: 56px; }
/* Global header height for fixed header offset (used by public pages) */
:root { --header-height: 4rem; }

/* Floating help: positioned above the footer using the footer height variable */
.floating-help {
  position: fixed;
  right: 1rem;
  bottom: calc(var(--admin-footer-height) + 12px);
  z-index: 50;
}

/* Fixed admin sidebar that stops above the pinned footer */
.admin-sidebar-fixed {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0; /* extend to bottom so the left column is continuous to the viewport bottom */
  width: var(--admin-sidebar-width);
  height: 100vh; /* ensure full viewport height */
  overflow: visible; /* allow inner scroll container to scroll independently */
  z-index: 80 !important; /* ensure sidebar always sits above footer rail and content */
}
/* Slightly smaller sidebar font to allow more items to remain visible when footer appears */
.admin-sidebar-fixed { font-size: 0.875rem; }
.admin-sidebar-fixed .sidebar-scroll a,
.admin-sidebar-fixed .sidebar-scroll button,
.admin-sidebar-fixed .sidebar-scroll .nav-item { font-size: inherit; }

/* Ensure the sidebar always uses the brand dark background and inner panels don't show white */
.admin-sidebar-fixed {
  background-color: #02665e !important;
  color: #ffffff !important;
}
.admin-sidebar-fixed .sidebar-scroll { background: transparent !important; padding-bottom: var(--admin-footer-height); overflow-y: auto; max-height: calc(100vh - 4rem - var(--admin-footer-height)); }
.admin-sidebar-fixed a, .admin-sidebar-fixed button { color: inherit !important; }
.admin-sidebar-fixed .bg-white { background: transparent !important; }
.admin-sidebar-fixed .card, .admin-sidebar-fixed .card-section {
  background: transparent !important;
  border-color: transparent !important;
  box-shadow: none !important;
}

/* Neutralize common light/white utility backgrounds inside the admin sidebar so inner panels
   don't show up as white, but allow intentional active/hover backgrounds (brand colors) to work. */
.admin-sidebar-fixed [class*="bg-white"],
.admin-sidebar-fixed .bg-gray-50,
.admin-sidebar-fixed .bg-gray-100,
.admin-sidebar-fixed .bg-neutral-100,
.admin-sidebar-fixed .bg-amber-50,
.admin-sidebar-fixed .bg-sky-50,
.admin-sidebar-fixed .bg-emerald-50 {
  background: transparent !important;
}

/* Make borders inside the sidebar subtle so inner panels keep structure without bright whites */
.admin-sidebar-fixed .border,
.admin-sidebar-fixed [class*="border-"] {
  border-color: rgba(255,255,255,0.06) !important;
}

/* Inputs, buttons, modals, cards, alerts inside the sidebar should blend with sidebar color */
.admin-sidebar-fixed input,
.admin-sidebar-fixed textarea,
.admin-sidebar-fixed select,
.admin-sidebar-fixed .btn,
.admin-sidebar-fixed .modal-card,
.admin-sidebar-fixed .qlink,
.admin-sidebar-fixed .alert-icon {
  background: transparent !important;
  border-color: transparent !important;
  box-shadow: none !important;
  color: inherit !important;
}

/* Owner-specific sidebar container when placed inside the centered layout frame.
  Keep the sidebar's native background and visual treatment; only provide
  scroll behavior and padding so the sidebar scrolls correctly when embedded
  inside the centered `max-w-6xl` container. */
.owner-sidebar-container { font-size: 0.875rem; }
.owner-sidebar-container .sidebar-scroll { padding-bottom: var(--admin-footer-height); overflow-y: auto; max-height: calc(100vh - 4rem - var(--admin-footer-height)); }
.owner-sidebar-container a, .owner-sidebar-container button { color: inherit !important; }

/* Hide decorative pseudo-elements inside the sidebar */
.admin-sidebar-fixed *::before,
.admin-sidebar-fixed *::after {
  background: transparent !important;
}

/* Helper to ensure footer inner content keeps a predictable height for layout offsets */
.footer-inner {
  min-height: var(--footer-height);
  display: flex;
  align-items: center;
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

/* Layout helpers used by admin layout */
.content-with-footer { padding-bottom: var(--admin-footer-height); }
.admin-footer-fixed { position: relative; z-index: 20; }
.mini-footer-above { position: fixed; right: 1.5rem; bottom: calc(var(--admin-footer-height) + 1rem); z-index: 30; }

/* Content area helper: adds bottom padding equal to footer height so page content isn't obscured */
.content-with-footer { padding-bottom: var(--admin-footer-height); }

/* Fixed footer helper: full-width, pinned to bottom, with rail already defined by .footer-with-rail */
.admin-footer-fixed { position: fixed; left: 0; right: 0; bottom: 0; height: var(--admin-footer-height); z-index: 40; }
.admin-footer-fixed .footer-inner { height: 100%; display: flex; align-items: center; }

/* Mini footer and floating widgets should sit above the pinned footer */
.mini-footer-above { position: fixed; right: 1.5rem; bottom: calc(var(--admin-footer-height) + 12px); z-index: 45; }

.help-button {
  @apply inline-flex items-center justify-center h-10 w-10 rounded-full bg-indigo-600 text-white shadow-lg hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-indigo-400;
}


/* Rich text helpers */
/* Avoid @apply on `prose` (typography plugin) to prevent circular dependency */
.prose { max-width: none; }

/* ---------- Components ---------- */
@layer components {
  /* Cards */
  .card         { @apply bg-white rounded-2xl border border-gray-200 shadow-card; }
  .card-section { @apply p-4 sm:p-6; }

  /* Buttons (base + variants) */
  .btn { @apply inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition border border-blue-200 hover:border-blue-300; }
  .btn:disabled { @apply opacity-60 cursor-not-allowed; }

  .btn-brand, .btn-solid { @apply bg-brand text-white border-brand hover:brightness-95; }
  .btn-info              { @apply bg-info text-white border-info hover:brightness-110; }
  .btn-info-outline      { @apply bg-white text-info border-info hover:bg-info/5; }
  .btn-success           { @apply bg-success text-white border-success hover:brightness-110; }
  .btn-danger            { @apply bg-danger text-white border-danger hover:brightness-110; }
  .btn-outline           { @apply bg-white text-brand border-brand hover:bg-brand/5; }
  .btn-ghost             { @apply bg-transparent text-gray-700 border-transparent hover:bg-gray-50 hover:border-gray-200; }

  /* Badges */
  .badge         { @apply inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-medium; }
  .badge-muted   { @apply text-gray-700 bg-gray-50 border-gray-200; }
  .badge-info    { @apply text-info bg-sky-50 border-sky-200; }
  .badge-success { @apply text-success bg-emerald-50 border-emerald-200; }
  .badge-warning { @apply text-amber-800 bg-amber-50 border-amber-200; }
  .badge-danger  { @apply text-danger bg-rose-50 border-rose-200; }

  /* Stat cards with gradient rail + hover lift */
  .stat-card { @apply relative overflow-hidden rounded-2xl bg-white border border-gray-200 shadow-card transition-all; }
  .stat-card:hover { @apply -translate-y-0.5 shadow-[0_10px_20px_rgba(0,0,0,.08),_0_6px_6px_rgba(0,0,0,.06)]; }
  .stat-card::after {
    content:""; position:absolute; inset:0 auto 0 0; width:10px;
    border-top-left-radius:inherit; border-bottom-left-radius:inherit;
    background: linear-gradient(to bottom, var(--rail-from), var(--rail-to));
  }
  .rail-brand   { --rail-from: theme('colors.brand.500');    --rail-to: theme('colors.brand.700'); }
  .rail-info    { --rail-from: theme('colors.info.DEFAULT'); --rail-to: #011366; }
  .rail-success { --rail-from: theme('colors.success.DEFAULT'); --rail-to: #127d3a; }
  .rail-danger  { --rail-from: theme('colors.danger.DEFAULT');  --rail-to: #b91c1c; }

  .stat-body  { @apply pl-5 pr-5 py-4 sm:py-5 sm:pl-6; }
  .stat-top   { @apply flex items-center gap-3; }
  .stat-icon  { @apply inline-flex h-9 w-9 items-center justify-center rounded-full border bg-gradient-to-tr from-gray-50 to-white; }
  .stat-label { @apply text-sm text-gray-600; }
  .stat-value { @apply mt-2 text-3xl sm:text-4xl font-semibold tracking-tight text-gray-900; }
  .stat-help  { @apply mt-2 text-xs text-gray-500; }

  /* Greeting accent: thin left rail, right rail (double-rail) and inner padding to match header brand */
  .greeting-accent {
    position: relative;
    border-left: 6px solid var(--driver-accent);
    padding-left: 1rem;
    padding-right: 1rem; /* space for right rail so content doesn't overlap */
  }

  /* Right rail implemented with a pseudo-element for symmetry */
  .greeting-accent::after {
    content: '';
    position: absolute;
    right: 0.5rem; /* inset from edge to align visually with left rail */
    top: 12px;
    bottom: 12px;
    width: 6px;
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
    /* Lighter, more subtle right rail to avoid overpowering the header */
    background: linear-gradient(to bottom, rgba(2,102,94,0.28), rgba(2,102,94,0.12));
    pointer-events: none;
  }

  /* Normalize driver page inner containers: remove ad-hoc left margins and pin content to the left
     so lists/tables (Invoices, Trips) appear visually connected to the driver sidebar. This is
     a CSS-only override that tightens left/right padding and adds a subtle left rail for emphasis. */
  @media (min-width: 768px) {
    .admin-sidebar-fixed + .flex-1 > main > div {
      margin-left: 0 !important;
      margin-right: auto !important;
      max-width: 72rem; /* content width for driver pages */
      padding-left: 0.5rem !important; /* tighten left padding so content sits nearer the sidebar */
      padding-right: 0.5rem !important; /* tighten right padding to squeeze content */
      position: relative; /* allow pseudo-element rail */
    }

    /* Subtle left rail on the content wrapper to visually connect content to the sidebar */
    .admin-sidebar-fixed + .flex-1 > main > div::before {
      content: '';
      position: absolute;
      left: 0.25rem;
      top: 12px;
      bottom: 12px;
      width: 4px;
      border-radius: 4px;
      background: linear-gradient(to bottom, rgba(2,102,94,0.12), rgba(2,102,94,0.06));
      pointer-events: none;
    }

    /* If page inner wrapper uses a right border (pr-2 border-r), reduce its extra padding slightly */
    .admin-sidebar-fixed + .flex-1 > main > div > .pr-2 {
      padding-right: 0.5rem !important;
    }
  }

/* Owner content gap utility: align content to sidebar width plus a small gap (0.5rem)
   Use the `owner-content-gap` class on the main content wrapper so the spacing
   is consistent and easily adjustable. Applies only on md+ viewports. */
@media (min-width: 768px) {
  .owner-content-gap {
    /* increase gap to 1rem for clearer separation */
    padding-left: calc(var(--admin-sidebar-width) + 1rem) !important;
  }
}

/* Ensure driver layout content respects frame boundaries */
.app-driver-layout {
  max-width: 100%;
  overflow-x: hidden;
}

.app-driver-layout * {
  max-width: 100%;
  box-sizing: border-box;
}

.app-driver-layout table {
  width: 100% !important;
  max-width: 100% !important;
  table-layout: auto;
}

  /* Status dot used in driver header: online/offline variants */
  .status-dot { @apply inline-block h-3 w-3 rounded-full; background: #9ca3af; }
  .status-dot.online { background: var(--driver-accent); }
  .status-dot.offline { background: #9ca3af; }

  /* Quick links: make tiles visually distinct, equal height, with subtle border and hover lift */
  .qlink {
    /* Make tiles respect siblings: full-size within grid cell but constrained, box-sizing prevents padding bleed */
    box-sizing: border-box;
    @apply flex items-center rounded-xl border bg-white px-3 py-2 text-sm font-medium transition-all hover:-translate-y-0.5 hover:shadow-card h-full min-h-[56px] max-h-[140px];
    display: flex; /* ensure flex layout for content centering */
    align-items: center;
    justify-content: center;
    gap: 8px; /* slightly tighter gap between icon and label */
    text-decoration: none; /* remove underline */
    position: relative; /* for tooltip positioning */
  }

  /* Ensure labels truncate instead of wrapping and pushing sibling tiles */
  .qlink > span {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: 4px; /* bring label closer to icon */
    max-width: calc(100% - 36px); /* leave space for icon */
  }

  /* Reveal full label as a floating tooltip when the tile is hovered or focused */
  .qlink:hover, .qlink:focus-within { z-index: 40; }
  /* Instead of showing a floating popup, allow the label to wrap inside the tile on hover/focus */
  .qlink-popup { display: none !important; }
  .qlink-wrapper:hover > .qlink > span, .qlink-wrapper:focus-within > .qlink > span {
    white-space: normal;
    overflow: visible;
    text-overflow: clip;
    max-width: 100%;
    display: block;
  }
  /* keep label color and background unchanged (no extra white popup) */
  .qlink-wrapper > .qlink > span { background: transparent; }

  /* Popup header/body styles (plain CSS to avoid unknown Tailwind tokens) */
  .qlink-popup {
    border: 1px solid rgba(15, 23, 42, 0.06); /* subtle border */
    border-radius: 0.375rem;
    background: #ffffff;
    overflow: visible;
  }
  .qlink-popup .qlink-popup-header {
    background: rgba(2,102,94,0.06); /* light brand tint */
    font-size: 0.875rem;
    color: #064e45; /* darker brand tint */
    border-top-left-radius: 0.375rem;
    border-top-right-radius: 0.375rem;
    padding: 0.25rem 0.5rem;
  }
  .qlink-popup .qlink-popup-body {
    padding: 0.5rem 0.5rem;
    color: #111827;
  }

  /* Make grid rows distribute space evenly but allow internal overflow to be clipped */
  .card > .card-section > .grid {
    grid-auto-rows: minmax(0, 1fr);
  }

  /* Inputs */
  .input    { @apply rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-brand/30 focus:border-brand; }
  .select   { @apply input; }
  .textarea { @apply input; }

  /* Auth / Register card styles: keep visual treatment consistent across auth screens */
  .auth-card {
    @apply bg-white rounded-2xl shadow-lg ring-1 ring-slate-100 overflow-hidden;
    transition-property: box-shadow, transform, opacity;
    transition-duration: 280ms;
    transition-timing-function: cubic-bezier(.2,.9,.2,1);
    will-change: transform, opacity;
  }

  .auth-card--lift {
    transform: translateY(-6px);
    box-shadow: 0 12px 40px rgba(2,6,23,0.08);
  }

  .auth-card-enter {
    opacity: 0; transform: translateY(8px) scale(.996);
    animation: auth-fade-in 360ms cubic-bezier(.2,.9,.2,1) forwards;
  }

  @keyframes auth-fade-in {
    from { opacity: 0; transform: translateY(8px) scale(.996); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  /* Progress bar used inside auth header */
  .auth-progress { @apply h-2 rounded-full overflow-hidden bg-slate-100; }
  .auth-progress > .bar { @apply h-2 bg-slate-500 transition-all duration-500 ease-in-out; }

  /* Auth card animations */
  @keyframes gradient-x {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  .animate-gradient-x {
    background-size: 200% 200%;
    animation: gradient-x 3s ease infinite;
  }

  @keyframes fade-in {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.4s ease-out;
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
  }
  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }

  @keyframes slide-up {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  .animate-slide-up {
    animation: slide-up 0.3s ease-out forwards;
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in-up {
    animation: fade-in-up 0.3s ease-out forwards;
  }

  @keyframes fade-out {
    from {
      opacity: 0.6;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
  .animate-fade-out {
    animation: fade-out 1s ease-out forwards;
  }

  @keyframes pulse-subtle {
    0%, 100% {
      opacity: 1;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    50% {
      opacity: 0.95;
      box-shadow: 0 6px 8px -1px rgba(16, 185, 129, 0.3), 0 4px 6px -1px rgba(16, 185, 129, 0.2);
    }
  }
  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }

  @keyframes slide-in-right {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out forwards;
  }

  @keyframes slide-in-right {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Booking flow step transitions - crossfade effect */
  @keyframes step-crossfade-in {
    from {
      opacity: 0;
      transform: scale(0.96) translateY(8px);
      filter: blur(4px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
      filter: blur(0);
    }
  }
  @keyframes step-crossfade-out {
    from {
      opacity: 1;
      transform: scale(1) translateY(0);
      filter: blur(0);
    }
    to {
      opacity: 0;
      transform: scale(1.04) translateY(-8px);
      filter: blur(4px);
    }
  }
  .step-enter {
    animation: step-crossfade-in 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  .step-exit {
    animation: step-crossfade-out 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Step highlight bar animation */
  @keyframes step-highlight-slide {
    from {
      transform: translateX(var(--prev-offset, 0%));
    }
    to {
      transform: translateX(var(--current-offset, 0%));
    }
  }
  .step-highlight-animate {
    animation: step-highlight-slide 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* Buttons and inputs specific to auth forms */
  .auth-cta { @apply inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-3 bg-slate-900 text-white hover:shadow-lg transition-transform duration-150; }
  .auth-input { @apply block w-full border border-gray-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 shadow-sm transition-shadow duration-150; }

  /* Auth card inner body to prevent accidental overflow and ensure proper stacking */
  .auth-card-body { @apply px-6 py-6 sm:px-8 sm:py-8; position: relative; box-sizing: border-box; z-index: 0; }

  /* Radio tiles for account type selection */
  .auth-radio-option { @apply transition-transform transform duration-150 flex items-center justify-center gap-2 px-4 py-3 rounded-2xl cursor-pointer border bg-white text-slate-700; }
  .auth-radio-option.active { @apply bg-slate-800 text-white border-slate-800 shadow-lg scale-105; }
  .auth-radio-check { @apply w-4 h-4 transition-opacity duration-150 opacity-0; }
  .auth-radio-option.active .auth-radio-check { @apply opacity-100; }

  /* Small utility for icon-only back button used in header */
  .auth-back-btn { @apply text-slate-600 hover:text-slate-800 p-0 inline-flex items-center justify-center; }

  /* Remove chevron from country code select */
  .country-code-select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: none;
  }
  .country-code-select::-ms-expand {
    display: none;
  }

  /* Remove default chevron from onboarding select elements */
  .onboard-select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: none;
  }
  .onboard-select::-ms-expand {
    display: none;
  }
  .onboard-select::-webkit-inner-spin-button,
  .onboard-select::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* GroupStays specific small helpers moved from component inline styles */
  .groupstays-select {
    -moz-appearance: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    background: transparent !important;
    background-image: none !important;
    padding-right: 2.25rem; /* Tailwind pr-9 */
    box-sizing: border-box;
    min-height: 2.5rem; /* ensure consistent height with selects */
    line-height: 1.25rem;
  }
  .groupstays-select::-ms-expand { display: none !important; }
  .groupstays-select::-moz-focus-inner { border: 0; }
  .groupstays-chevron { filter: none; pointer-events: none; right: 0.65rem; }

  /* GroupStays component layout: scoped to the component using aria-labelledby selector */
  [aria-labelledby="group-stays-heading"] .groupstays-section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

/* ---------- Room & Bathroom (visual only) ---------- */
/* Style the room type select for improved visual weight */
select[title="Room type"] {
  height: 2.5rem;
  padding: 0.375rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
  font-weight: 600;
}

/* Bed cards grid (targets the specific grid used in the room form)
   Uses the class combo present in the markup to scope changes without JS edits */
.grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.6rem 0.75rem;
  background: #fbfdff;
  border: 1px solid rgba(15,23,42,0.04);
  transition: box-shadow .14s ease, transform .12s ease;
}
.grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded:hover {
  box-shadow: 0 8px 22px rgba(2,6,23,0.06);
  transform: translateY(-3px);
}

/* Buttons inside each bed card */
.grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded button {
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  color: #334155;
}

/* Make the numeric readout clearly visible and centered */
.grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded input[aria-label$="beds count"] {
  width: 56px;
  height: 36px;
  text-align: center;
  border-radius: 8px;
  border: 1px solid rgba(15,23,42,0.06);
  font-weight: 600;
}

/* Ensure the bed label uses a consistent capitalization/weight */
.grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded .text-sm {
  font-weight: 600;
  color: #0f172a;
}

/* Slightly increase spacing on larger screens so two-line content breathes */
@media (min-width: 768px) {
  .grid.grid-cols-1.md\:grid-cols-2.gap-3.mt-2 > .bg-gray-50.p-2.rounded {
    padding: 0.75rem 0.9rem;
  }
}

/* End Room & Bathroom visual overrides */

/* ---------- Room count & Smoking controls ---------- */
/* Target the rooms-count numeric input inside the room-details grid */
.grid.grid-cols-1.md\:grid-cols-2.gap-3 > div > input[type="number"] {
  width: 100%;
  height: 2.5rem;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #fff;
  font-weight: 600;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
}
.grid.grid-cols-1.md\:grid-cols-2.gap-3 > div > input[type="number"]:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,164,0.08);
  border-color: rgba(14,165,164,0.9);
}

/* Smoking radio group appearance: slightly larger radios and brand accent */
.p-3.bg-gray-50.border.border-gray-100.rounded-lg input[type="radio"] {
  width: 18px;
  height: 18px;
  margin-right: 0.5rem;
  accent-color: #0ea5a0; /* Tailwind teal-400-ish */
}
.p-3.bg-gray-50.border.border-gray-100.rounded-lg label.inline-flex.items-center {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.5rem;
  border-radius: 0.5rem;
  transition: background .12s ease, transform .08s ease;
}
.p-3.bg-gray-50.border.border-gray-100.rounded-lg label.inline-flex.items-center:hover {
  background: rgba(14,165,164,0.03);
}
.p-3.bg-gray-50.border.border-gray-100.rounded-lg input[type="radio"]:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,164,0.08);
}

/* Make Yes/No option labels visibly selectable (filled buttons when selected) */
.p-3.bg-gray-50.border.border-gray-100.rounded-lg label.inline-flex.items-center {
  background: #f8fafc; /* light muted background for the option area */
  border: 1px solid rgba(15,23,42,0.04);
}
.p-3.bg-gray-50.border.border-gray-100.rounded-lg label.inline-flex.items-center:has(input:checked) {
  background: #0ea5a0; /* teal */
  color: #ffffff;
  border-color: rgba(14,165,160,0.9);
  transform: translateY(-1px);
}
.p-3.bg-gray-50.border.border-gray-100.rounded-lg label.inline-flex.items-center:has(input:checked) input[type="radio"] {
  filter: brightness(0) invert(1);
}

@media (min-width: 768px) {
  .grid.grid-cols-1.md\:grid-cols-2.gap-3 > div > input[type="number"] {
    max-width: 12rem; /* keep the numeric input compact on larger screens */
  }
}

/* End Room count & Smoking controls */

/* ---------- Bathroom Details (visual only) ---------- */
/* Scope: targets the 'Bathroom Details' heading followed by the grid used in the form */
.mt-2 > h4.font-semibold + .mt-2.grid {
  gap: 0.75rem;
}

/* Make the radio options for "Is the bathroom private?" clearer and pill-like */
.mt-2 > h4.font-semibold + .mt-2.grid .inline-flex.items-center input[type="radio"] {
  width: 18px;
  height: 18px;
  margin-right: 0.5rem;
  accent-color: #0ea5a0;
}
.mt-2 > h4.font-semibold + .mt-2.grid .inline-flex.items-center {
  padding: 0.35rem 0.5rem;
  border-radius: 0.5rem;
  transition: background .12s ease, transform .08s ease;
}
.mt-2 > h4.font-semibold + .mt-2.grid .inline-flex.items-center:hover {
  background: rgba(14,165,160,0.03);
}

/* Bathroom items checkbox grid */
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 label.flex.items-center {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.45rem 0.5rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.04);
  background: #f8fafc; /* muted non-white background so selectable area is visible */
  transition: box-shadow .12s ease, transform .08s ease, background .12s ease, color .12s ease;
}
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 label.flex.items-center:hover {
  box-shadow: 0 8px 20px rgba(2,6,23,0.04);
  transform: translateY(-2px);
  background: #eefdfa;
}
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #0ea5a0;
}

/* Checked state: prefer :has() when available to style the whole label; fallback below changes just the text */
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 label.flex.items-center:has(input:checked) {
  background: #0ea5a0;
  color: #ffffff;
  border-color: rgba(14,165,160,0.9);
  transform: translateY(-1px);
}
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 label.flex.items-center:has(input:checked) input[type="checkbox"] {
  filter: brightness(0) invert(1);
}

/* Fallback: if :has isn't supported, at least make the label text white when the checkbox is checked */
.mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 input[type="checkbox"]:checked + span {
  color: #ffffff;
  background: transparent; /* keep span background transparent since label is muted */
}

/* Towel color input (optional): slightly larger and prominent */
.mt-2 > h4.font-semibold + .mt-2.grid .mt-2 input[placeholder] {
  height: 2.5rem;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  font-weight: 600;
  background: #fff;
}
.mt-2 > h4.font-semibold + .mt-2.grid .mt-2 input[placeholder]:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,160,0.06);
  border-color: rgba(14,165,160,0.9);
}

@media (min-width: 768px) {
  .mt-2 > h4.font-semibold + .mt-2.grid .grid.grid-cols-2.gap-2 label.flex.items-center {
    padding: 0.55rem 0.75rem;
  }
}

/* End Bathroom Details visual overrides */

/* ---------- Other room amenities (tile appearance) ---------- */
/* Scoped to the grid used in the room form so bathroom styles remain consistent */
.other-amenities-grid label.flex.items-center {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.45rem 0.5rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.04);
  background: #f8fafc; /* muted non-white background so selectable area is visible */
  transition: box-shadow .12s ease, transform .08s ease, background .12s ease, color .12s ease;
}
.other-amenities-grid label.flex.items-center:hover {
  box-shadow: 0 8px 20px rgba(2,6,23,0.04);
  transform: translateY(-2px);
  background: #eefdfa;
}
.other-amenities-grid input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #0ea5a0;
}

/* Prefer :has() to style the whole tile when checked, fallback below for older browsers */
.other-amenities-grid label.flex.items-center:has(input:checked) {
  background: #0ea5a0;
  color: #ffffff;
  border-color: rgba(14,165,160,0.9);
  transform: translateY(-1px);
}
.other-amenities-grid label.flex.items-center:has(input:checked) input[type="checkbox"] {
  filter: brightness(0) invert(1);
}

/* Fallback if :has() not supported: at least make the label text white when the checkbox is checked */
.other-amenities-grid input[type="checkbox"]:checked + span {
  color: #ffffff;
}

/* End Other room amenities */

/* ---------- Other amenities input & Room description styling ---------- */
/* Make the comma-separated input and the room description textarea visually match other form controls
   without changing markup. Targets the input directly following the amenities grid and the textarea
   that follows in the room mini-form. */
.other-amenities-grid + .mt-2 input,
.other-amenities-grid + .mt-2 input[type="text"],
.other-amenities-grid + .mt-2 input[type="search"] {
  height: 2.5rem;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  font-weight: 600;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
  width: 100%;
}
.other-amenities-grid + .mt-2 input:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,160,0.06);
  border-color: rgba(14,165,160,0.9);
}

/* Room description textarea (just after the other amenities block): keep consistent padding, border and focus ring */
.other-amenities-grid ~ .mt-4 textarea,
.other-amenities-grid ~ .mt-4 textarea:focus {
  min-height: 86px; /* visually similar to 3 rows */
  padding: 0.6rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
}
.other-amenities-grid ~ .mt-4 textarea:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,160,0.06);
  border-color: rgba(14,165,160,0.9);
}

/* Slightly increase spacing between the amenities input and following controls */
.other-amenities-grid + .mt-2,
.other-amenities-grid ~ .mt-4 {
  margin-top: 0.5rem;
}

/* End Other amenities input & Room description styling */

/* ---------- Room image input, preview thumbnails, and price field ---------- */
/* Style the room image file input to visually match other inputs (height, border, focus) */
#roomImageInput {
  display: block;
  width: 100%;
  height: 2.5rem;
  padding: 0.45rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  color: #0f172a;
  font-weight: 600;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
  cursor: pointer;
}
#roomImageInput:hover { box-shadow: 0 8px 20px rgba(2,6,23,0.04); }
#roomImageInput:focus { outline: none; box-shadow: 0 0 0 4px rgba(14,165,160,0.06); border-color: rgba(14,165,160,0.9); }

/* Preview thumbnails: make rounded previews with subtle border and lift */
#roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div {
  border-radius: 0.5rem;
  overflow: hidden;
  border: 1px solid rgba(15,23,42,0.06);
  box-shadow: 0 6px 14px rgba(2,6,23,0.04);
}
#roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div img,
#roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div > img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Thumbnail remove overlay button */
.thumbnail-remove-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 28px;
  height: 28px;
  border-radius: 9999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(15,23,42,0.06);
  color: #0f172a;
  border: 1px solid rgba(15,23,42,0.08);
  z-index: 30;
  transition: background .12s ease, transform .08s ease;
}
.thumbnail-remove-btn:hover { background: rgba(220,38,38,0.95); color: #fff; transform: translateY(-1px); }
.thumbnail-remove-btn:focus { outline: none; box-shadow: 0 0 0 4px rgba(220,38,38,0.12); }

/* Defined room thumbnails (after Add room type) - modern thumbnail styling */
.defined-room-thumb {
  background: #ffffff;
  border-radius: 0.5rem;
  overflow: hidden;
  border: 1px solid rgba(15,23,42,0.06);
  position: relative;
  box-shadow: 0 6px 14px rgba(2,6,23,0.04);
}
.defined-room-thumb .thumbnail-remove-btn {
  top: 6px;
  right: 6px;
}
.defined-room-thumb img, .defined-room-thumb .object-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}



/* Price input and '/ night' label styling inside the room mini-form */
.mt-4.grid.grid-cols-1.md\:grid-cols-3 .mt-2.flex.items-center input[type="number"] {
  height: 2.5rem;
  padding: 0.45rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(15,23,42,0.06);
  background: #ffffff;
  font-weight: 600;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.02);
}
.mt-4.grid.grid-cols-1.md\:grid-cols-3 .mt-2.flex.items-center input[type="number"]:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(14,165,160,0.06);
  border-color: rgba(14,165,160,0.9);
}
.mt-4.grid.grid-cols-1.md\:grid-cols-3 .mt-2.flex.items-center span {
  margin-left: 0.5rem;
  color: #475569; /* slate-600 */
  font-weight: 600;
}

/* Small responsive tweak: keep the price input compact on larger screens */

/* Ensure uploaded thumbnails and defined-room thumbnails have consistent square dimensions
   and rounded corners so the uploader visually matches the final card appearance. */
#roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div,
.defined-room-thumb {
  width: 5rem; /* 80px */
  min-width: 5rem;
  aspect-ratio: 1 / 1 !important; /* enforce square */
  height: auto !important; /* let aspect-ratio define height */
  border-radius: 0.75rem; /* rounded corners */
  overflow: hidden; /* clip images to rounded shape */
  display: inline-block;
  box-sizing: border-box;
}

/* Stronger selector fallback for elements using utility classes (w-20 h-20 etc.) */
.w-20.h-20.rounded.overflow-hidden.border.relative,
.w-20.h-20.rounded.overflow-hidden.border.relative {
  width: 5rem !important;
  min-width: 5rem !important;
  aspect-ratio: 1 / 1 !important;
  height: auto !important;
  border-radius: 0.75rem !important;
  overflow: hidden !important;
}
.w-20.h-20.rounded.overflow-hidden.border.relative > img,
.w-20.h-20.rounded.overflow-hidden.border.relative img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

#roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div img,
.defined-room-thumb img,
.defined-room-thumb .object-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Slightly larger remove button on thumbnails to improve touch targets */
.thumbnail-remove-btn {
  top: 6px;
  right: 6px;
  width: 30px;
  height: 30px;
}

@media (min-width: 768px) {
  #roomImageInput + .mt-2.flex.flex-wrap.gap-2 > div,
  .defined-room-thumb {
    width: 5.5rem; /* 88px on larger screens */
    height: 5.5rem;
    min-width: 5.5rem;
    min-height: 5.5rem;
  }
}
@media (min-width: 768px) {
  .mt-4.grid.grid-cols-1.md\:grid-cols-3 .mt-2.flex.items-center input[type="number"] { max-width: 12rem; }
}

/* End Room image and price styling */

/* Make the "Is the bathroom private?" radio options visually selectable like the smoking controls */
.mt-2 > .mt-2.grid .flex.items-center.space-x-4 > label.inline-flex.items-center,
.mt-2 > .flex.items-center.space-x-4 > label.inline-flex.items-center {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.35rem 0.5rem;
  border-radius: 0.5rem;
  background: #f8fafc;
  border: 1px solid rgba(15,23,42,0.04);
  transition: background .12s ease, transform .08s ease;
}
.mt-2 > .mt-2.grid .flex.items-center.space-x-4 > label.inline-flex.items-center input[type="radio"],
.mt-2 > .flex.items-center.space-x-4 > label.inline-flex.items-center input[type="radio"] {
  width: 18px;
  height: 18px;
  margin-right: 0.5rem;
  accent-color: #0ea5a0;
}
.mt-2 > .mt-2.grid .flex.items-center.space-x-4 > label.inline-flex.items-center:hover,
.mt-2 > .flex.items-center.space-x-4 > label.inline-flex.items-center:hover {
  background: rgba(14,165,160,0.03);
}
.mt-2 > .mt-2.grid .flex.items-center.space-x-4 > label.inline-flex.items-center:has(input:checked),
.mt-2 > .flex.items-center.space-x-4 > label.inline-flex.items-center:has(input:checked) {
  background: #0ea5a0;
  color: #ffffff;
  border-color: rgba(14,165,160,0.9);
  transform: translateY(-1px);
}
.mt-2 > .mt-2.grid .flex.items-center.space-x-4 > label.inline-flex.items-center:has(input:checked) input[type="radio"],
.mt-2 > .flex.items-center.space-x-4 > label.inline-flex.items-center:has(input:checked) input[type="radio"] {
  filter: brightness(0) invert(1);
}

/* Fallback hint: if :has() isn't supported, labels still have a muted background so options are visible */
  [aria-labelledby="group-stays-heading"] .groupstays-section > label,
  [aria-labelledby="group-stays-heading"] .groupstays-section > .text-xs {
    color: #475569; /* slate-600 */
    font-size: 0.75rem;
  }
  [aria-labelledby="group-stays-heading"] .groupstays-section input[type="number"],
  [aria-labelledby="group-stays-heading"] .groupstays-section input[type="time"],
  [aria-labelledby="group-stays-heading"] .groupstays-section .groupstays-select,
  [aria-labelledby="group-stays-heading"] .groupstays-section textarea {
    min-height: 2.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    border: 1px solid rgba(15,23,42,0.06);
    background: #ffffff;
    box-sizing: border-box;
  }
  [aria-labelledby="group-stays-heading"] .groupstays-section .groupstays-select {
    padding-right: 2.25rem; /* keep chevron space */
    line-height: 1.25rem;
  }
  [aria-labelledby="group-stays-heading"] .private-room-row {
    display: flex;
    gap: 1rem;
    align-items: center;
    flex-wrap: wrap;
  }
  [aria-labelledby="group-stays-heading"] .private-room-row .w-20 { min-width: 5rem; }
  /* Slightly tighten spacing for recommendation badge area */
  [aria-labelledby="group-stays-heading"] .RecommendationBadge, [aria-labelledby="group-stays-heading"] .recommendation-badge {
    margin-top: 0.25rem;
  }

  /* Arrangements UI: pill toggles, icons and summary badges */
  [aria-labelledby="group-stays-heading"] .arrangements-summary { display:flex; gap:0.5rem; align-items:center; flex-wrap:wrap; margin-top:0.25rem; }
  [aria-labelledby="group-stays-heading"] .arrangements-summary .pill-badge {
    background: rgba(2,102,94,0.08);
    color: #064e45;
    padding: 0.25rem 0.5rem;
    border-radius: 999px;
    font-size: 0.75rem;
    display:inline-flex; align-items:center; gap:0.4rem;
  }

  [aria-labelledby="group-stays-heading"] .arrangements-grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:0.5rem; margin-top:0.5rem; }
  @media (min-width: 768px) { [aria-labelledby="group-stays-heading"] .arrangements-grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }

  .arrangement-pill {
    display:inline-flex; align-items:center; gap:0.5rem; padding:0.45rem 0.75rem; border-radius:0.5rem; border:1px solid rgba(15,23,42,0.06);
    background:#fff; color:#0f172a; cursor:pointer; font-size:0.9rem; transition:transform .14s cubic-bezier(.2,.9,.2,1), box-shadow .14s ease, background-color .12s ease, color .12s ease; box-shadow: 0 1px 0 rgba(15,23,42,0.02);
  }
  .arrangement-pill svg { width:1rem; height:1rem; opacity:0.9 }
  .arrangement-pill:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(2,6,23,0.06); }
  .arrangement-pill:active { transform: translateY(0) scale(0.995); }
  .arrangement-pill.selected { background: #059669; color: #fff; border-color: #059669; transform: translateY(-3px) scale(1.02); box-shadow: 0 10px 30px rgba(2,6,23,0.12); }
  .arrangement-pill:focus-visible { outline: none; box-shadow: 0 6px 20px rgba(2,6,23,0.08); transform: translateY(-2px); }

  /* Pickup details column tweaks inside arrangements block */
  [aria-labelledby="group-stays-heading"] .arrangements-details input,
  [aria-labelledby="group-stays-heading"] .arrangements-details textarea {
    border: 1px solid rgba(15,23,42,0.06); padding:0.5rem 0.75rem; border-radius:0.375rem; background:#fff;
  }

  /* ---------- Book-style pages for Register/Login ---------- */
  /* Creates a gentle open-book look made of two adjacent panels that resemble pages. */
  .book-container {
    display: flex;
    gap: 1.25rem; /* space between pages */
    align-items: stretch;
    justify-content: center;
    width: 100%;
    max-width: 72rem; /* matches design rhythm */
    margin: 0 auto;
    padding: 1rem;
  }

  .book-page {
    flex: 1 1 0%;
    min-width: 0;
    background: linear-gradient(180deg, #ffffff 0%, #fbfbfb 100%);
    border-radius: 1rem;
    box-shadow: 0 8px 30px rgba(2,6,23,0.06);
    border: 1px solid rgba(15,23,42,0.06);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* Left page has a subtle inner fold on the right edge */
  .book-left {
    border-top-right-radius: 0.75rem;
    border-bottom-right-radius: 0.75rem;
  }

  /* Right page has a subtle inner fold on the left edge */
  .book-right {
    border-top-left-radius: 0.75rem;
    border-bottom-left-radius: 0.75rem;
  }

  /* Decorative spine/fold: a thin gradient in the gap between pages */
  .book-container::before {
    content: '';
    width: 6px;
    background: linear-gradient(180deg, rgba(15,23,42,0.04), rgba(15,23,42,0.02));
    border-radius: 999px;
    display: block;
    transform: translateY(0.25rem);
    align-self: stretch;
  }

  /* Inner page shadow to suggest curvature near the fold */
  .book-page::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background-image: linear-gradient(90deg, rgba(2,6,23,0.02), transparent 18%);
    mix-blend-mode: multiply;
    opacity: 0.9;
  }

  /* Make left/right curvature different so the fold is visible */
  .book-left::after { background-image: linear-gradient(90deg, rgba(2,6,23,0.03), transparent 22%); }
  .book-right::after { background-image: linear-gradient(-90deg, rgba(2,6,23,0.02), transparent 16%); }

  /* Page inner padding helper (consistent with card-section) */
  .book-page .page-content { padding: 1.5rem; }

  /* Responsive: stack pages on small screens */
  @media (max-width: 768px) {
    .book-container { flex-direction: column; gap: 1rem; padding: 0.5rem; }
    .book-container::before { display: none; }
    .book-page { border-radius: 0.75rem; }
    .book-left, .book-right { border-radius: 0.75rem; }
  }

  /* ---------- Focus Normalization (Accessible & Non-blinking) ---------- */
  /*
    Provide a subtle, consistent focus-visible indicator for keyboard users
    while avoiding animated or 'blinking' focus rings that can be visually
    distracting. Applies to common interactive elements site-wide.
  */
  a:focus, button:focus, input:focus, textarea:focus, select:focus, [tabindex]:focus {
    outline: none !important;
    transition: none !important;
  }

  a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible, [tabindex]:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 4px rgba(2,6,23,0.06) !important; /* soft neutral ring */
    border-radius: 0.375rem !important; /* match common rounded controls */
    transition: none !important; /* avoid animated blinking */
  }

  /* Keep interactive elements visually stable by removing focus transitions */
  a, button, [role="button"], .qlink { -webkit-tap-highlight-color: transparent; }

  /* Specific suppression for YouTube thumbnails to keep visuals constant (no blink) */
  .youtube-thumb-anchor,
  .youtube-thumb-anchor *,
  .thumbnail-overlay {
    transition: none !important;
    outline: none !important;
    box-shadow: none !important;
  }

  .youtube-thumb-anchor:focus,
  .youtube-thumb-anchor:focus-visible,
  .youtube-thumb-anchor:active {
    outline: none !important;
    box-shadow: none !important;
  }

  /* Prevent overlay from capturing pointer events (so anchor receives focus/click only) */
  .thumbnail-overlay { pointer-events: none; }

  /* Force solid YouTube red for thumbnail overlay to avoid accidental dark tint/opacity */
  .thumbnail-overlay {
    background-color: #FF0000 !important;
    opacity: 1 !important;
    mix-blend-mode: normal !important;
  }

  /* Footer rail segments (Tanzania flag colors) moved from inline styles in PublicFooter.tsx */
  .footer-rail-seg { display: block; height: 100%; }
  .footer-rail-green { background-color: #007A3D; }
  .footer-rail-yellow { background-color: #FCD116; }
  .footer-rail-black { background-color: #000000; }
  .footer-rail-blue { background-color: #00A3E0; }

  /* Links */
  /* No underline; show bottom border color on hover to indicate interactivity */
  .link { @apply text-info border-b border-transparent transition-colors hover:border-info; }

  /* Tables */
  .table    { @apply w-full border-collapse text-sm; }
  .thead th { @apply bg-gray-50 text-left font-semibold border-b px-3 py-2; }
  .tbody td { @apply border-b px-3 py-2; }
  /* Driver-specific table tightening: reduce horizontal padding and force ellipsis for long values
     so invoice/trips tables stay compact and move visually closer to the sidebar. */
  @media (min-width: 768px) {
    .admin-sidebar-fixed + .flex-1 main table { table-layout: fixed; width: 100%; }
    .admin-sidebar-fixed + .flex-1 main table th,
    .admin-sidebar-fixed + .flex-1 main table td {
      padding-left: 0.5rem !important;
      padding-right: 0.5rem !important;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .admin-sidebar-fixed + .flex-1 main table th.action,
    .admin-sidebar-fixed + .flex-1 main table td.action { width: 6rem; }
    .admin-sidebar-fixed + .flex-1 main table th.amount,
    .admin-sidebar-fixed + .flex-1 main table td.amount { width: 8rem; text-align: right; }
  }
  .row-hover { @apply transition-colors; }
  .row-hover:hover { @apply bg-gray-50; }

  /* Alerts */
  .alert        { @apply flex items-start gap-3 rounded-xl border p-3 sm:p-4; }
  .alert-icon   { @apply inline-flex h-6 w-6 items-center justify-center rounded-full bg-white/70 border; }
  .alert-title  { @apply text-sm font-semibold text-gray-900; }
  .alert-desc   { @apply text-sm text-gray-700; }
  .alert-info    { @apply border-info/30    bg-info/5; }
  .alert-success { @apply border-success/30 bg-success/5; }
  .alert-warning { @apply border-amber-300  bg-amber-50; }
  .alert-danger  { @apply border-danger/30  bg-danger/5; }

  /* Modal */
  .modal-backdrop { @apply fixed inset-0 z-40 bg-black/40; }
  .modal          { @apply fixed inset-0 z-50 flex items-center justify-center p-4; }
  .modal-card     { @apply bg-white rounded-2xl border border-gray-200 shadow-card w-full max-w-md; }
  .modal-head     { @apply px-5 pt-5 text-base font-semibold text-gray-900; }
  .modal-body     { @apply px-5 py-4 text-sm text-gray-700; }
  .modal-foot     { @apply px-5 pb-5 pt-3 flex justify-end gap-2; }

  /* Spinner */
  @keyframes spin { to { transform: rotate(360deg); } }
  .spinner {
    @apply inline-block h-5 w-5 rounded-full border-2 border-gray-300;
  border-right-color: theme('colors.brand.DEFAULT');
    animation: spin .7s linear infinite;
  }

  /* Dot-spinner: four colored dots rotating around a center (compact inline loader) */
  .dot-spinner {
    display: inline-block;
    width: 28px;
    height: 28px;
    position: relative;
    vertical-align: middle;
    transform-origin: center;
    animation: dot-rotate 1.2s linear infinite;
  }

  .dot-spinner .dot {
    width: 7px;
    height: 7px;
    border-radius: 9999px;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 0 0 rgba(0,0,0,0);
    animation: dot-pulse 1s infinite ease-in-out;
  }

  /* place dots at N, E, S, W around the circle */
  .dot-spinner .dot:nth-child(1) { top: 6%; left: 50%; transform: translate(-50%, -50%); animation-delay: 0s; }
  .dot-spinner .dot:nth-child(2) { top: 50%; left: 94%; transform: translate(-50%, -50%); animation-delay: 0.12s; }
  .dot-spinner .dot:nth-child(3) { top: 94%; left: 50%; transform: translate(-50%, -50%); animation-delay: 0.24s; }
  .dot-spinner .dot:nth-child(4) { top: 50%; left: 6%; transform: translate(-50%, -50%); animation-delay: 0.36s; }

  /* colors: blue, black, yellow, green */

  /* Country name flag gradients used for Explore button text */
  .flag-text-tanzania {
    background-image: linear-gradient(135deg, #006a4e 0%, #006a4e 30%, #ffd100 30%, #ffd100 40%, #000000 40%, #000000 55%, #00a3dd 55%, #00a3dd 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
  }

  .flag-text-kenya {
    background-image: linear-gradient(90deg, #000000 0%, #000000 22%, #ffffff 22%, #ffffff 28%, #d52b1e 28%, #d52b1e 62%, #ffffff 62%, #ffffff 68%, #006233 68%, #006233 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
  }

  .flag-text-uganda {
    background-image: linear-gradient(90deg, #000000 0%, #000000 33%, #ffd100 33%, #ffd100 66%, #d52b1e 66%, #d52b1e 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
  }

  /* Explore button zoom / lift effect (applied via .btn-explore) */
  .btn-explore {
    transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
    transform: translateZ(0);
  }

  .btn-explore:hover,
  .btn-explore:focus {
    transform: translate3d(0, -2px, 0) scale(1.02);
    box-shadow: 0 8px 16px rgba(2,6,23,0.06), 0 3px 6px rgba(2,6,23,0.03);
    outline: none;
  }

  /* On touch devices the active state gives a quick scale for feedback */
  .btn-explore:active {
    transform: translate3d(0, 0, 0) scale(0.99);
  }

  /* Respect reduce-motion preference */
  @media (prefers-reduced-motion: reduce) {
    .btn-explore,
    .btn-explore:hover,
    .btn-explore:focus,
    .btn-explore:active {
      transition: none !important;
      transform: none !important;
      box-shadow: none !important;
    }
  }

  /* Card interactive lift/scale for clickable cards */
  .card-raise {
    transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
    transform: translateZ(0);
    isolation: isolate;
  }

  .card-raise:hover,
  .card-raise:focus-within {
    transform: translate3d(0, -4px, 0) scale(1.01);
    box-shadow: 0 12px 24px rgba(2,6,23,0.08), 0 4px 8px rgba(2,6,23,0.04);
    z-index: 10;
  }

  .card-raise:active {
    transform: translate3d(0, -1px, 0) scale(0.998);
  }

  @media (prefers-reduced-motion: reduce) {
    .card-raise, .card-raise:hover, .card-raise:focus-within, .card-raise:active {
      transition: none !important;
      transform: none !important;
      box-shadow: none !important;
    }
  }

  /* Bottom color rail highlighting on card hover for country flags */
  .flag-rail-tanzania::after,
  .flag-rail-kenya::after,
  .flag-rail-uganda::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 0px;
    transition: height 250ms cubic-bezier(0.4, 0, 0.2, 1), opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    pointer-events: none;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  .flag-rail-tanzania::after {
    background: linear-gradient(135deg, #006a4e 0%, #006a4e 30%, #ffd100 30%, #ffd100 40%, #000000 40%, #000000 55%, #00a3dd 55%, #00a3dd 100%);
  }

  .flag-rail-kenya::after {
    background: linear-gradient(90deg, #000000 0%, #000000 22%, #ffffff 22%, #ffffff 28%, #d52b1e 28%, #d52b1e 62%, #ffffff 62%, #ffffff 68%, #006233 68%, #006233 100%);
  }

  .flag-rail-uganda::after {
    background: linear-gradient(90deg, #000000 0%, #000000 33%, #ffd100 33%, #ffd100 66%, #d52b1e 66%, #d52b1e 100%);
  }

  /* Expand the rail on interactive card states */
  .card-raise:hover.flag-rail-tanzania::after,
  .card-raise:focus-within.flag-rail-tanzania::after,
  .card-raise:hover.flag-rail-kenya::after,
  .card-raise:focus-within.flag-rail-kenya::after,
  .card-raise:hover.flag-rail-uganda::after,
  .card-raise:focus-within.flag-rail-uganda::after {
    height: 6px;
    opacity: 1;
  }

  /* Guest popover positioning (reads coordinates from CSS variables updated in JS) */
  .nolsaf-guest-popper {
    position: fixed;
    left: var(--nolsaf-guest-left, 50%);
    top: var(--nolsaf-guest-top, auto);
    width: var(--nolsaf-guest-width, auto);
    transform: translateX(0);
    max-width: calc(100% - 2rem);
  }
  /* Date popper: mirrors guest popper but has a mobile bottom-sheet fallback */
  .nolsaf-date-popper {
    position: fixed;
    left: var(--nolsaf-date-left, 50%);
    top: var(--nolsaf-date-top, auto);
    width: var(--nolsaf-date-width, auto);
    transform: translateX(0);
    max-width: calc(100% - 2rem);
  }
  /* Make the popper corners more rounded and add an outer rounded ring for visual separation */
  .nolsaf-date-popper {
    border-radius: 14px !important;
    overflow: visible !important; /* allow the outer ring shadow to render */
  }
  /* subtle outer rounded ring using a pseudo-element so the popper has a second rounded layer */
  .nolsaf-date-popper::before {
    content: "";
    position: absolute;
    left: -8px;
    top: -8px;
    right: -8px;
    bottom: -8px;
    border-radius: 18px !important;
    pointer-events: none;
    z-index: -1;
    box-shadow: 0 18px 40px rgba(2,6,23,0.09), 0 6px 16px rgba(2,6,23,0.06);
  }
  @media (max-width: 767px) {
    .nolsaf-date-popper {
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      top: auto !important;
      width: 100% !important;
      max-width: 100% !important;
      /* for bottom-sheet on mobile, round the top corners to make it appear like a sheet */
      border-top-left-radius: 14px !important;
      border-top-right-radius: 14px !important;
      border-bottom-left-radius: 0 !important;
      border-bottom-right-radius: 0 !important;
    }
  }

  /* Mobile sheet grabber: small centered rounded bar to indicate draggable sheet */
  .nolsaf-sheet-grabber-wrapper { display: none; }
  @media (max-width: 767px) {
    .nolsaf-sheet-grabber-wrapper {
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      padding-top: 8px !important;
      padding-bottom: 6px !important;
    }
    .nolsaf-sheet-grabber {
      width: 44px !important;
      height: 5px !important;
      border-radius: 9999px !important;
      background: rgba(15,23,42,0.08) !important;
      box-shadow: 0 1px 0 rgba(255,255,255,0.6) inset !important;
    }
  }
  /* Ensure DayPicker displays multiple months side-by-side for a clear flow */
  /* Target both the .rdp and .rdp-months containers depending on DayPicker version */
  .nolsaf-date-popper .rdp,
  .nolsaf-date-popper .rdp-months {
    display: flex !important;
    flex-direction: row !important;
    gap: 0.75rem !important;
    align-items: flex-start !important;
    justify-content: center !important;
    padding: 0.25rem !important;
    flex-wrap: nowrap !important;
  }
  .nolsaf-date-popper .rdp-month,
  .nolsaf-date-popper .rdp-months > * {
    flex: 1 1 0 !important;
    min-width: 260px !important;
  }
  /* Give each month a clear card boundary so they don't visually overflow into one another */
  .nolsaf-date-popper .rdp-month {
    background: #ffffff;
    border: 1px solid rgba(15,23,42,0.06);
    border-radius: 10px !important;
    padding: 0.5rem !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 260px;
  }
  /* Keep the table inside each month constrained and responsive */
  .nolsaf-date-popper .rdp-month .rdp-table {
    width: 100% !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
  }
  /* Slight separation visual between months */
  .nolsaf-date-popper .rdp-month + .rdp-month {
    margin-left: 0.5rem !important;
  }
  .nolsaf-date-popper .rdp-caption {
    text-align: center !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 0.5rem !important;
  }
  /* Navigation buttons (prev/next) inline with the month caption */
  .nolsaf-date-popper .rdp-nav {
    display: inline-flex !important;
    gap: 0.25rem !important;
    align-items: center !important;
  }

  /* Force caption label and nav to sit on the same line and keep the month label left-aligned */
  .nolsaf-date-popper .rdp-caption,
  .nolsaf-date-popper .rdp-month .rdp-caption {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 0.5rem !important;
    flex-wrap: nowrap !important;
    position: relative !important; /* allow absolutely positioned nav */
  }
  .nolsaf-date-popper .rdp-caption_label,
  .nolsaf-date-popper .rdp-caption > .rdp-caption_label {
    order: 1 !important;
    flex: 1 1 auto !important;
    text-align: left !important;
    font-weight: 600 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    min-width: 0 !important; /* allow flex shrink */
    display: inline-block !important;
    padding-right: 56px !important; /* reserve space for nav on the right */
  }
  /* Pin the nav (prev/next buttons) to the far right of the caption row */
  .nolsaf-date-popper .rdp-nav {
    display: none !important; /* hide built-in DayPicker nav inside our popper (we use custom nav) */
  }
  /* Also hide any nav buttons inside the rdp header so only our independent chevron is visible */
  .nolsaf-date-popper .rdp-nav_button { display: none !important; }

  /* Custom prev/next buttons inside the popper: remove visible border/box and use round hover only */
  .nolsaf-date-popper button[aria-label="Next month"],
  .nolsaf-date-popper button[aria-label="Previous month"] {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 6px !important;
    width: 36px !important;
    height: 36px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: #334155 !important; /* slate-700 */
    transition: background-color .12s ease, transform .06s ease !important;
  }
  .nolsaf-date-popper button[aria-label="Next month"]:hover,
  .nolsaf-date-popper button[aria-label="Previous month"]:hover {
    background: rgba(15, 23, 42, 0.06) !important; /* subtle rounded hover */
    border-radius: 9999px !important;
    transform: translateY(-1px) !important;
  }
  .nolsaf-date-popper button[aria-label="Next month"]:active,
  .nolsaf-date-popper button[aria-label="Previous month"]:active {
    transform: translateY(0) !important;
    background: rgba(15, 23, 42, 0.08) !important;
  }

  /* touched day visual (simulate hover on touch devices) */
  .nolsaf-date-popper .rdp-day.nolsaf-day-touch,
  .nolsaf-date-popper .rdp-day:active {
    background: #10b981 !important; /* use brand/emerald as primary */
    color: white !important;
    border-radius: 6px !important;
    box-shadow: 0 1px 0 rgba(0,0,0,0.06) inset !important;
  }
  .nolsaf-date-popper .rdp-day.nolsaf-day-preview {
    background: rgba(16,185,129,0.12) !important; /* light emerald tint */
    color: #065f46 !important; /* darker green for contrast */
  }

  /* Guest popover header close icon: remove visible box and use rounded hover like chevrons */
  .nolsaf-guest-popper button[aria-label="Close guest selector"] {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 6px !important;
    width: 36px !important;
    height: 36px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: #334155 !important;
    transition: background-color .12s ease, transform .06s ease !important;
    border-radius: 9999px !important;
  }
  .nolsaf-guest-popper button[aria-label="Close guest selector"]:hover {
    background: rgba(15, 23, 42, 0.06) !important;
  }

  /* Expand and refine guest popover card for clarity and visual hierarchy */
  .nolsaf-guest-popper {
    min-width: 320px !important;
    max-width: 460px !important;
    padding: 0 !important; /* inner padding handled by child .p-3 */
    border-radius: 12px !important;
    box-shadow: 0 10px 30px rgba(2,6,23,0.12) !important;
    background: #ffffff !important;
    border: 1px solid rgba(15,23,42,0.06) !important;
  }

  .nolsaf-guest-popper .p-3 {
    padding: 1rem 1.25rem !important;
  }

  .nolsaf-guest-popper .font-medium { font-size: 1rem !important; }
  .nolsaf-guest-popper .text-xs { font-size: 0.78rem !important; color: #475569 !important; }

  /* Slightly increased spacing between guest rows for readability */
  .nolsaf-guest-popper .space-y-3 > * + * { margin-top: 0.85rem !important; }

  /* Larger steppers and consistent button sizing inside popover
     Match the 'Clear' button visual: transparent background, subtle border, rounded corners */
  .nolsaf-guest-popper .inline-flex.items-center.gap-2 button {
    min-width: 36px !important;
    min-height: 36px !important;
    padding: 0.18rem 0.5rem !important;
    font-size: 1.05rem !important;
    background: transparent !important;
    border: 1px solid rgba(15,23,42,0.06) !important; /* subtle slate border */
    border-radius: 6px !important;
    color: #334155 !important; /* slate-700 */
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: background-color .12s ease, transform .06s ease !important;
  }
  .nolsaf-guest-popper .inline-flex.items-center.gap-2 button:hover {
    background: rgba(15,23,42,0.04) !important;
  }
  /* Disabled state for steppers: visually match Clear button disabled look */
  .nolsaf-guest-popper .inline-flex.items-center.gap-2 button:disabled,
  .nolsaf-guest-popper .inline-flex.items-center.gap-2 button[aria-disabled="true"] {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
    background: transparent !important;
    border-color: rgba(15,23,42,0.04) !important;
    box-shadow: none !important;
  }
  /* Keyboard focus indicates the same as other popover buttons (clear/done) */
  .nolsaf-guest-popper .inline-flex.items-center.gap-2 button:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 6px rgba(15,23,42,0.04) !important;
  }

  /* Clear/Done buttons: slightly larger, clearer contrast and spacing */
  .nolsaf-guest-popper .mt-4 .flex.justify-end .px-2,
  .nolsaf-guest-popper .mt-4 .flex.justify-end .px-3 {
    padding: 0.46rem 0.9rem !important;
    font-size: 0.95rem !important;
  }

  /* Improve inner layout: header spacing and alignment */
  .nolsaf-guest-popper .flex.items-center.justify-between {
    gap: 0.5rem !important;
    align-items: center !important;
  }

  /* Make helper text slightly more prominent and readable */
  .nolsaf-guest-popper #preg-help { color: #475569 !important; font-size: 0.8rem !important; }

  /* Pregnancy toggle: make a compact accessible switch with a clear hit target and smooth knob movement */
  .nolsaf-preg-toggle {
    width: 46px !important;
    height: 26px !important;
    padding: 3px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    border-radius: 9999px !important;
    background: rgba(15,23,42,0.06) !important; /* subtle off track */
    border: 1px solid rgba(15,23,42,0.06) !important;
    transition: background-color .16s ease, border-color .16s ease, box-shadow .12s ease !important;
    box-sizing: border-box !important;
  }
  .nolsaf-preg-toggle:focus {
    outline: none !important;
    box-shadow: 0 0 0 6px rgba(16,185,129,0.10) !important; /* subtle emerald focus ring */
  }
  .nolsaf-preg-toggle.is-on {
    background: #10b981 !important; /* emerald */
    border-color: rgba(16,185,129,0.24) !important;
    justify-content: flex-end !important;
  }
  .nolsaf-preg-toggle.is-off {
    background: rgba(15,23,42,0.04) !important;
    border-color: rgba(15,23,42,0.06) !important;
    justify-content: flex-start !important;
  }
  .nolsaf-preg-toggle > .nolsaf-preg-knob {
    width: 18px !important;
    height: 18px !important;
    background: #ffffff !important;
    border-radius: 9999px !important;
    box-shadow: 0 2px 6px rgba(2,6,23,0.12) !important;
    margin: 0 2px !important;
    transition: transform .14s ease, box-shadow .12s ease !important;
  }
  .nolsaf-preg-toggle.is-on > .nolsaf-preg-knob {
    transform: translateX(0) !important; /* knob positioned by justify-content */
  }
  .nolsaf-preg-toggle.is-off > .nolsaf-preg-knob {
    transform: translateX(0) !important;
  }
  .nolsaf-date-popper button.rdp-nav_button,
  .nolsaf-date-popper .rdp-nav button {
    -webkit-appearance: none !important;
    appearance: none !important;
    background: transparent !important;
    border: none !important;
    color: #3b82f6 !important; /* blue */
    width: 36px !important;
    height: 36px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 0.375rem !important;
    transition: background .12s ease !important;
  }
  .nolsaf-date-popper button.rdp-nav_button:hover,
  .nolsaf-date-popper .rdp-nav button:hover {
    background: rgba(59,130,246,0.08) !important;
  }
  /* Ensure the chevron icons don't wrap and sit on the same line as the month header */
  .nolsaf-date-popper .rdp-caption > * { white-space: nowrap !important; }
  /* Mobile: stack months vertically inside bottom sheet */
  @media (max-width: 767px) {
    .nolsaf-date-popper .rdp { display: block; padding: 0; }
    .nolsaf-date-popper .rdp-month { min-width: auto; }
  }
  .dot-blue   { background: #3b82f6; }
  .dot-black  { background: #111827; }
  .dot-yellow { background: #f59e0b; }
  .dot-green  { background: #10b981; }

  @keyframes dot-pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.6; }
    50% { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
  }

  @keyframes dot-rotate {
    to { transform: rotate(360deg); }
  }

  /* Small variant for inline use (e.g. buttons) */
  .dot-spinner.dot-sm {
    width: 16px;
    height: 16px;
    animation-duration: 1s;
  }

  .dot-spinner.dot-sm .dot {
    width: 4px;
    height: 4px;
  }

  .dot-spinner.dot-sm .dot:nth-child(1) { top: 6%; left: 50%; }
  .dot-spinner.dot-sm .dot:nth-child(2) { top: 50%; left: 94%; }
  .dot-spinner.dot-sm .dot:nth-child(3) { top: 94%; left: 50%; }
  .dot-spinner.dot-sm .dot:nth-child(4) { top: 50%; left: 6%; }

  /* Tabs */
  .tabs       { @apply flex items-center gap-2 border-b border-gray-200; }
  .tab        { @apply px-3 py-2 text-sm text-gray-600 hover:text-gray-900; }
  .tab-active { @apply border-b-2 border-brand text-gray-900 font-medium; }

  /* Pagination */
  .pager         { @apply flex items-center gap-1; }
  .page          { @apply inline-flex items-center justify-center h-9 min-w-[2.25rem] rounded-lg border bg-white text-sm text-gray-700 hover:bg-gray-50; }
  .page-current  { @apply border-brand text-brand bg-brand/5; }
  .page-disabled { @apply opacity-50 cursor-not-allowed; }

  /* Skeleton shimmer */
  .skeleton {
    background: linear-gradient(90deg, rgba(0,0,0,0.04) 25%, rgba(0,0,0,0.06) 37%, rgba(0,0,0,0.04) 63%);
    background-size: 480px 100%;
    @apply animate-shimmer rounded-md;
  }
  .skeleton-card { @apply skeleton h-28 w-full rounded-2xl border border-gray-200; }
}

/* ---------- Print-specific styles ---------- */
@media print {
  /* Keep background white and text black for printing */
  body { background: #fff !important; color: #000 !important; }

  /* Hide UI elements not relevant for print */
  .no-print, .admin-sidebar-fixed, .site-header-refresh, .site-header-export, .mini-footer-above, .admin-footer-fixed { display: none !important; }

  /* Print invoice container adjustments */
  .print-invoice { background: #fff !important; box-shadow: none !important; border: none !important; padding: 0.5in !important; max-width: 100% !important; }
  .print-invoice .text-2xl, .print-invoice .text-xl { font-size: 16pt !important; }

  /* Tables: clear borders and comfortable padding for paper */
  .print-invoice table { border-collapse: collapse; width: 100%; }
  .print-invoice th, .print-invoice td { border: 1px solid #ddd; padding: 8px; font-size: 11pt; }
  .print-invoice thead th { background: #f7f7f7; }

  /* Reduce link decoration when printing */
  a { color: #000; text-decoration: none; }

  /* Page margin and size */
  @page { margin: 0.5in; size: A4 portrait; }

  /* Print only the invoice container and footer: hide everything else on the page to avoid printing global chrome */
  body * { visibility: hidden; }
  .print-invoice, .print-invoice * , .invoice-footer, .invoice-footer * { visibility: visible; }
  /* position the printable invoice at the top of the page */
  .print-invoice { position: absolute; left: 0.5in; right: 0.5in; top: 0.5in; }
  /* make footer fixed at bottom */
  .invoice-footer { position: fixed; bottom: 0.25in; left: 0.5in; right: 0.5in; }

  /* Try to scale down larger invoices to fit to one page when possible */
  .print-invoice { transform-origin: top left; transform: scale(0.95); }
}

/* Invoice footer: hidden on screen, visible when printing. Provides company logo, page numbering and a QR code. */
.invoice-footer { display: none; }

@media print {
  /* ensure printed invoice has extra bottom space so footer doesn't overlap content */
  .print-invoice { padding-bottom: 1.6in !important; }

  .invoice-footer { 
    display: flex !important; 
    position: fixed; 
    bottom: 0; 
    left: 0; 
    right: 0; 
    justify-content: space-between; 
    align-items: center; 
    padding: 0.12in 0.5in; 
    background: #fff; 
    border-top: 1px solid rgba(0,0,0,0.08);
    font-size: 10pt;
  }

  .invoice-footer-left, .invoice-footer-right { display: flex; align-items: center; gap: 0.5rem; }
  .invoice-footer-logo { height: 36px; width: auto; display: inline-block; }
  .invoice-footer-company { font-size: 10pt; color: #111827; }
  .invoice-footer-qr { height: 64px; width: 64px; display: inline-block; }

  /* center: page numbering using CSS counters. `counter(pages)` is not supported in all engines but works in modern Chromium/Firefox. */
  .invoice-footer-center { text-align: center; flex: 1 1 auto; }
  .invoice-footer-center.pagenum::after { content: "Page " counter(page) " of " counter(pages); }
}

/* Refresh button: match Settings behavior (transparent base, hover/active/focus) */
.site-header-refresh,
button[aria-label="Refresh"] {
  @apply inline-flex items-center justify-center rounded-xl p-2 hover:bg-white/10;
  background-color: transparent;
  color: #ffffff;
  border-color: transparent;
}

/* Mobile drawer larger touch target variant */
.site-header-refresh-mobile,
button[aria-label="Refresh"].mobile {
  @apply inline-flex h-10 w-10 items-center justify-center rounded-xl transition hover:bg-white/10 active:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40;
  background-color: transparent;
  color: #ffffff;
}

/* Export invoices CSV: match Settings behavior (transparent base, hover/active/focus) */
.site-header-export,
button[aria-label="Export Invoices CSV"] {
  @apply inline-flex items-center justify-center rounded-xl p-2 hover:bg-white/10;
  background-color: transparent;
  color: #ffffff; /* icons use currentColor */
  border-color: transparent;
}

.site-header-export-mobile,
button[aria-label="Export Invoices CSV"].mobile {
  @apply inline-flex h-10 w-10 items-center justify-center rounded-xl transition hover:bg-white/10 active:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40;
  background-color: transparent;
  color: #ffffff;
}

/* Widget Preferences: match Settings behavior (transparent base, hover/active/focus) */
.site-header-widget,
button[aria-label="Widget Preferences"] {
  @apply inline-flex items-center justify-center rounded-xl p-2 hover:bg-white/10;
  background-color: transparent;
  color: #ffffff; /* icons use currentColor */
  border-color: transparent;
}

.site-header-widget-mobile,
button[aria-label="Widget Preferences"].mobile {
  @apply inline-flex h-10 w-10 items-center justify-center rounded-xl transition hover:bg-white/10 active:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40;
  background-color: transparent;
  color: #ffffff;
}

/* Ensure Message, Support and Settings icons render white in header and mobile drawer */
.site-header-actions,
button[aria-label="Messages"],
button[aria-label="Support"],
button[aria-label="Settings"],
a[aria-label="Messages"],
a[aria-label="Support"],
a[aria-label="Settings"] {
  color: #ffffff; /* lucide icons use currentColor */
}

.site-header-actions-mobile,
button[aria-label="Messages"].mobile,
button[aria-label="Support"].mobile,
button[aria-label="Settings"].mobile,
a[aria-label="Messages"].mobile,
a[aria-label="Support"].mobile,
a[aria-label="Settings"].mobile {
  color: #ffffff;
}

/* Theme toggle: match Messages/Support/Settings background and hover behavior */
button[aria-label="Toggle theme"],
a[aria-label="Toggle theme"] {
  @apply inline-flex items-center justify-center rounded-xl p-2 hover:bg-white/10;
  background-color: transparent;
  color: #ffffff; /* ensure icon is white */
  border-color: transparent;
}

button[aria-label="Toggle theme"].mobile,
a[aria-label="Toggle theme"].mobile {
  @apply inline-flex h-10 w-10 items-center justify-center rounded-xl transition hover:bg-white/10 active:bg-white/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40;
  background-color: transparent;
  color: #ffffff;
}

/* Header/Footer helpers */
.nols-header { @apply bg-brand text-white; }
.nols-footer { @apply bg-brand text-white; }

/* Footer separation rail: draws a full-width line at the top of footers to separate content
   from the footer similar to the header rail. Apply `.footer-with-rail` to footer elements. */
.footer-with-rail {
  position: relative;
  /* white footer background with a subtle top rail */
  background-color: #ffffff;
  color: #02665e; /* brand text color for footer */
  border-top: 1px solid rgba(2,102,94,0.06);
}
.footer-with-rail::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0; /* drawn at the very top of the footer */
  height: 6px; /* rail thickness */
  /* gradient matching the admin header brand  visually connects header and footer */
  background: linear-gradient(90deg, #02665e 0%, #013a37 100%);
  z-index: 5; /* keep the rail behind the sidebar */
}

/* Footer base should not create a new stacking context above the sidebar */
.footer-with-rail { position: relative; z-index: 0; }

/* On md+ screens, don't draw the rail under the fixed left sidebar  start the rail after the sidebar width */
@media (min-width: 768px) {
  .footer-with-rail::before {
    left: var(--admin-sidebar-width);
  }
}

/* Ensure the page content doesn't visually collide with the footer rail when using fixed elements */
.page-bottom-buffer { padding-bottom: calc(var(--footer-height) + 1rem); }

/* Utility to add top padding equal to the fixed header so content is not obscured */
.header-offset { padding-top: var(--header-height); }

/* Public container centers content and removes admin left-rail offset.
  Use this on public pages to align content without the admin sidebar margin.
  Matches LayoutFrame boundaries: max-w-6xl (72rem/1152px) with centered margins and responsive padding.
  Responsive: smaller padding on mobile, standard padding on larger screens. */
.public-container { 
  width: 100%; 
  max-width: 72rem; 
  margin-left: auto; 
  margin-right: auto; 
  padding-left: 0.5rem; 
  padding-right: 0.5rem; 
  box-sizing: border-box;
  overflow-x: hidden;
}

@media (min-width: 640px) {
  .public-container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
}

@media (min-width: 768px) {
  .public-container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Accessibility helper: screen reader only */
.sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; }

/* Scrollbars (optional) */
@supports (scrollbar-width: thin) or (scrollbar-color: #000 transparent) {
  * { scrollbar-width: thin; scrollbar-color: theme('colors.gray.300') transparent; }
}
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-thumb { background: theme('colors.gray.300'); border-radius: 8px; }
*::-webkit-scrollbar-thumb:hover { background: theme('colors.gray.400'); }

/* Sidebar-specific scrollbar: hide until hover to keep chrome clean */
.sidebar-scroll { overflow-y: auto; }
.sidebar-scroll::-webkit-scrollbar { width: 8px; }
.sidebar-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); transition: background .15s; border-radius: 8px; }
.sidebar-scroll:hover::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.22); }
/* Only apply Firefox/Chromium 121+ coloring when supported */
@supports (scrollbar-color: #000 #fff) {
  .sidebar-scroll { scrollbar-color: rgba(255,255,255,0.12) transparent; }
  .sidebar-scroll:hover { scrollbar-color: rgba(255,255,255,0.22) transparent; }
}

/* Hide scrollbar visuals while preserving scrollability (main content) */
.no-scrollbar { overflow: auto; }
.no-scrollbar { -ms-overflow-style: none; }
.no-scrollbar::-webkit-scrollbar { display: none; }

/* Status filter horizontal scroll - hide scrollbar on small devices */
.status-filter-scroll { overflow-x: auto; }
.status-filter-scroll { -ms-overflow-style: none; scrollbar-width: none; }
.status-filter-scroll::-webkit-scrollbar { display: none; }

/* Scrollbar hide utility */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Touch helper: prevent default touch panning while interacting with draggable controls */
.touch-action-none { -ms-touch-action: none; touch-action: none; }

/* Subtle blink/pulse for high-attention single words.
   Uses opacity pulse (not hard show/hide) and respects user reduced-motion preference. */
@keyframes nls-blink {
  0% { opacity: 1; }
  50% { opacity: 0.55; }
  100% { opacity: 1; }
}

.nls-blink {
  display: inline-block;
  animation: nls-blink 1s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .nls-blink { animation: none !important; }
}

/* ---------- Owner horizontal stepper (Booking.com style) ---------- */
@layer components {
  .owner-steps-container {
    @apply w-full;
  }
  
  .owner-steps-wrapper {
    @apply flex items-center justify-center flex-wrap gap-0;
    position: relative;
    padding: 0 1rem;
  }
  
  .owner-step-item {
    @apply flex items-center;
    position: relative;
    flex: 0 0 auto;
  }
  
  .owner-step-button {
    @apply flex flex-col items-center gap-2 cursor-pointer transition-all duration-300 ease-in-out;
    padding: 0.75rem 1rem;
    min-width: 100px;
    position: relative;
    z-index: 2;
    background: transparent;
    border: none;
    outline: none;
  }
  
  .owner-step-button:hover:not(.owner-step-button--active) {
    transform: translateY(-2px);
  }
  
  .owner-step-button:focus-visible {
    @apply outline-none ring-2 ring-emerald-500 ring-offset-2 rounded-lg;
  }
  
  .owner-step-circle {
    @apply flex items-center justify-center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    background-color: #e5e7eb;
    border: 0;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.06);
    transition: all 0.25s ease;
    position: relative;
  }
  
  .owner-step-number {
    @apply text-sm font-semibold;
    color: #374151;
    transition: color 0.25s ease;
  }
  
  .owner-step-checkmark {
    width: 1.25rem;
    height: 1.25rem;
    color: white;
    animation: checkmarkAppear 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  @keyframes checkmarkAppear {
    0% {
      opacity: 0;
      transform: scale(0.5) rotate(-180deg);
    }
    50% {
      transform: scale(1.1) rotate(0deg);
    }
    100% {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
  }
  
  .owner-step-label {
    @apply text-xs font-medium;
    color: #6b7280;
    transition: color 0.25s ease;
    text-align: center;
    white-space: nowrap;
  }
  
  /* Active state */
  .owner-step-button--active .owner-step-circle {
    background-color: #059669;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.18);
    transform: scale(1.02);
  }
  
  @keyframes pulseActive {
    0%, 100% {
      box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
    }
    50% {
      box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.15);
    }
  }
  
  .owner-step-button--active .owner-step-number {
    color: white;
  }
  
  .owner-step-button--active .owner-step-label {
    color: #059669;
    font-weight: 600;
  }
  
  /* Completed state */
  .owner-step-button--completed .owner-step-circle {
    background-color: #059669;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.18);
  }
  
  @keyframes completedPulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.15);
    }
    100% {
      transform: scale(1);
    }
  }
  
  .owner-step-button--completed .owner-step-label {
    color: #059669;
    font-weight: 500;
  }
  
  /* Past state (steps before active) */
  .owner-step-button--past .owner-step-circle {
    background-color: #d1fae5;
    box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.12);
  }
  
  .owner-step-button--past .owner-step-number {
    color: #059669;
  }
  
  .owner-step-button--past .owner-step-label {
    color: #6b7280;
  }
  
  /* Connector lines */
  .owner-step-connector {
    @apply flex items-center;
    width: 80px;
    height: 2px;
    position: relative;
    margin: 0 0.5rem;
    z-index: 1;
  }
  
  .owner-step-connector-line {
    width: 100%;
    height: 2px;
    background-color: #e5e7eb;
    border-radius: 1px;
    transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .owner-step-connector-line::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, #059669, #10b981);
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .owner-step-connector--completed .owner-step-connector-line {
    background-color: #d1fae5;
  }
  
  .owner-step-connector--completed .owner-step-connector-line::after {
    left: 0;
  }
  
  .owner-step-connector--active .owner-step-connector-line {
    background-color: #e5e7eb;
  }
  
  .owner-step-connector--active .owner-step-connector-line::after {
    left: 0;
    animation: connectorFill 0.8s ease-out forwards;
  }
  
  @keyframes connectorFill {
    0% {
      left: -100%;
    }
    100% {
      left: 0;
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .owner-steps-wrapper {
      @apply gap-0;
      padding: 0 0.5rem;
    }
    
    .owner-step-button {
      min-width: 70px;
      padding: 0.5rem 0.5rem;
    }
    
    .owner-step-circle {
      width: 2rem;
      height: 2rem;
    }
    
    .owner-step-number {
      @apply text-xs;
    }
    
    .owner-step-label {
      @apply text-[10px];
      font-size: 0.625rem;
    }
    
    .owner-step-connector {
      width: 40px;
      margin: 0 0.25rem;
    }
  }
  
  @media (max-width: 640px) {
    .owner-steps-wrapper {
      @apply flex-wrap;
      gap: 0.5rem;
    }
    
    .owner-step-connector {
      display: none;
    }
    
    .owner-step-item {
      flex: 1 1 calc(50% - 0.5rem);
      justify-content: center;
    }
  }
  
  /* ---------- Vertical Stepper (Left Side) ---------- */
  .owner-steps-container-vertical {
    position: relative;
    padding-right: 0.25rem;
    overflow: visible;
    height: 100%;
    width: 100%;
  }
  
  .owner-steps-wrapper-vertical {
    @apply flex flex-col;
    position: relative;
    height: 100%;
    overflow: visible;
  }
  
  .owner-step-item-vertical {
    @apply flex items-start;
    position: relative;
    margin-bottom: 0;
    min-height: 2rem;
    width: 100%;
  }
  
  .owner-step-button-vertical {
    @apply flex items-center justify-center cursor-pointer transition-all duration-300 ease-in-out;
    padding: 0.5rem 0;
    position: relative;
    z-index: 2;
    background: transparent;
    border: none;
    outline: none;
    width: 100%;
  }
  
  .owner-step-button-vertical:hover:not(.owner-step-button-vertical--active) {
    transform: scale(1.1);
  }
  
  .owner-step-button-vertical:focus-visible {
    @apply outline-none ring-2 ring-emerald-500 ring-offset-2 rounded-lg;
  }
  
  .owner-step-circle-vertical {
    @apply flex items-center justify-center flex-shrink-0;
    width: 2rem;
    height: 2rem;
    border-radius: 9999px;
    background-color: #e5e7eb;
    border: 0;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.06);
    transition: all 0.25s ease;
    position: relative;
  }
  
  .owner-step-number-vertical {
    @apply text-sm font-semibold;
    color: #374151;
    transition: color 0.25s ease;
  }
  
  .owner-step-checkmark-vertical {
    width: 1rem;
    height: 1rem;
    color: white;
    animation: checkmarkAppear 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Active state - vertical */
  .owner-step-button-vertical--active .owner-step-circle-vertical {
    background-color: #059669;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.18);
    transform: scale(1.02);
  }
  
  .owner-step-button-vertical--active .owner-step-number-vertical {
    color: white;
  }
  
  /* Completed state - vertical */
  .owner-step-button-vertical--completed .owner-step-circle-vertical {
    background-color: #059669;
    box-shadow: 0 0 0 6px rgba(5, 150, 105, 0.18);
  }
  
  /* Past state - vertical */
  .owner-step-button-vertical--past .owner-step-circle-vertical {
    background-color: #d1fae5;
    box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.12);
  }
  
  .owner-step-button-vertical--past .owner-step-number-vertical {
    color: #059669;
  }
  
  /* Vertical connector lines */
  .owner-step-connector-vertical {
    @apply flex items-center justify-center;
    width: 2px;
    height: 3rem;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 2.5rem;
    z-index: 1;
    margin: 0;
  }
  
  .owner-step-connector-line-vertical {
    width: 2px;
    height: 100%;
    background-color: #e5e7eb;
    border-radius: 1px;
    transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .owner-step-connector-line-vertical::after {
    content: '';
    position: absolute;
    top: -100%;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, #059669, #10b981);
    transition: top 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .owner-step-connector-vertical--completed .owner-step-connector-line-vertical {
    background-color: #d1fae5;
  }
  
  .owner-step-connector-vertical--completed .owner-step-connector-line-vertical::after {
    top: 0;
  }
  
  .owner-step-connector-vertical--active .owner-step-connector-line-vertical {
    background-color: #e5e7eb;
  }
  
  .owner-step-connector-vertical--active .owner-step-connector-line-vertical::after {
    top: 0;
    animation: connectorFillVertical 0.8s ease-out forwards;
  }
  
  @keyframes connectorFillVertical {
    0% {
      top: -100%;
    }
    100% {
      top: 0;
    }
  }
  /* Vertical left stepper (desktop) */
  .owner-vertical-steps {
    position: relative;
    width: 100%;
  }
  .owner-vertical-line {
    position: absolute; left: 2.25rem; top: 0; bottom: 0; width: 2px; background: rgba(15,23,42,0.06);
  }
  .owner-vertical-progress {
    position: absolute; left: 2.25rem; top: 0; width: 2px; background: linear-gradient(to bottom, #059669, #10b981); border-radius: 1px;
  }
  .owner-vertical-step { @apply relative mb-6 flex items-center gap-3 cursor-default; }
  .owner-vertical-step .step-num { @apply inline-flex items-center justify-center w-8 h-8 rounded-full bg-emerald-50 text-emerald-700 font-semibold; }
  .owner-vertical-step--active .step-num { @apply bg-emerald-600 text-white; }
  .owner-vertical-step .step-label { @apply text-sm text-gray-700; }
  @media (min-width: 768px) {
    .owner-vertical-steps { @apply sticky top-6 pr-6; }
  }
}

/* Terms page responsive fixes */
article[class*="max-w"] {
  box-sizing: border-box;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

article[class*="max-w"] * {
  max-width: 100%;
  box-sizing: border-box;
}

article[class*="max-w"] p,
article[class*="max-w"] div,
article[class*="max-w"] span {
  word-break: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* Terms content text alignment - justified (block-like) on all screen sizes */
.terms-content {
  text-align: justify;
  text-justify: inter-word;
}

.terms-content p,
.terms-content div,
.terms-content span,
.terms-content li {
  text-align: justify;
  text-justify: inter-word;
  word-break: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* Terms content links styling */
.terms-content a {
  color: #2563eb;
  text-decoration: underline;
  transition: color 0.2s ease;
}

.terms-content a:hover {
  color: #1e40af;
  text-decoration: underline;
}

/* Ensure public-container content doesn't overflow on any device */
.public-container * {
  max-width: 100%;
  box-sizing: border-box;
}

.public-container img,
.public-container video,
.public-container iframe {
  max-width: 100%;
  height: auto;
}

/* Smooth testimonial transitions */
@keyframes testimonial-fade-in {
  from {
    opacity: 0;
    transform: translate3d(0, 8px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes testimonial-fade-out {
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: translate3d(0, -8px, 0);
  }
}

/* Testimonial card smooth transitions */
figure[aria-label="Testimonial"] {
  animation: testimonial-fade-in 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  transform: translateZ(0);
  will-change: opacity, transform;
}

